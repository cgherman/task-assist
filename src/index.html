<!doctype html>
<html lang="en">
<head>
  <title>TaskAssist</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <base href="/">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <script type="text/javascript" src="https://ajax.microsoft.com/ajax/jQuery/jquery-1.4.2.min.js"></script>

  <script async defer src="https://apis.google.com/js/api.js"
    onload="this.onload=function(){};handleClientLoad()"
    onreadystatechange="if (this.readyState === 'complete') this.onload()">
  </script>

  <script type="text/javascript">
    function handleClientLoad() {
      // Loads the client library and the auth2 library together for efficiency.
      // Loading the auth2 library is optional here since `gapi.client.init` function will load
      // it if not already loaded. Loading it upfront can save one network request.

      gapi.load('client:auth2', initClientWithSettings);
    }

    function initClientWithSettings() {
      // Get API key and OAuth client ID from app-specific JSON file
      // Create a new project & corresponding credentials here: https://console.developers.google.com/apis/credentials
      $.getJSON('/assets/api_key.json', function(data) {
        initClient(data.api_key, data.client_id);
      });
    }

    function initClient(api_key, client_id) {
      // 1) Initialize the client with API key and discovery URL for the Tasks API
      // 2) initialize OAuth with an OAuth 2.0 client ID
      // 3) Adjust scopes (space delimited string) as needed to request access.
      gapi.client.init({
          apiKey: api_key,
          discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/tasks/v1/rest"],
          clientId: client_id,
          scope: 'https://www.googleapis.com/auth/tasks'
      }).then(function () {
        // Listen for sign-in state changes.
        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

        // Handle the initial sign-in state.
        updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
      });
    }

    function updateSigninStatus(isSignedIn) {
      // When signin status changes, this function is called.
      // If the signin status is changed to signedIn, we make an API call.
      if (isSignedIn) {
        makeApiCall();
      }
    }

    function handleSignInClick(event) {
      // Ideally the button should only show up after gapi.client.init finishes, so that this
      // handler won't be called before OAuth is initialized.
      gapi.auth2.getAuthInstance().signIn();
    }

    function handleSignOutClick(event) {
      gapi.auth2.getAuthInstance().signOut(
      ).then(function(response) {
        console.log('Successful sign-out.');
      }, function(rejectReason) {
        console.log('Error: ' + rejectReason.result.error.message);
      });
    }

    function makeApiCall() {
      gapi.client.tasks.tasklists.list({
      }).then(function(response) {
        console.log('Successful sign-in.');
        for (index = 0; index < response.result.items.length; index++) {
          console.log(response.result.items[index].title);
        }
        console.log('Successful fetch of Task Lists.');
      }, function(rejectReason) {
        console.log('Error: ' + rejectReason.result.error.message);
      });
    }
  </script>
</head>
<style>
  html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
<body class="w3-light-grey">
  
  <!-- Top container -->
  <div class="w3-bar w3-top w3-black w3-large" style="z-index:4">
    <button class="w3-bar-item w3-button w3-hide-large w3-hover-none w3-hover-text-light-grey" onclick="w3_open();"><i class="fa fa-bars"></i>  Menu</button>
    <span class="w3-bar-item w3-right">TaskAssist Alpha</span>
  </div>
  
  <!-- Sidebar/menu -->
  <nav class="w3-sidebar w3-collapse w3-white w3-animate-left" style="z-index:3;width:300px;" id="mySidebar"><br>
    <div class="w3-container w3-row">
      <div class="w3-col">
        <span class="small-caps w3-xlarge"><i class="fa fa-info-circle fa-fw"></i>  Information</span><br>
      </div>
    </div>
    <hr>
    <div class="w3-bar-block">
      <a href="#" class="w3-bar-item w3-button w3-padding-16 w3-hide-large w3-dark-grey w3-hover-black" onclick="w3_close()" title="close menu"><i class="fa fa-remove fa-fw"></i>  Close Menu</a>

      <span class="w3-bar-item w3-button w3-padding w3-black w3-hover-black"><i class="fa fa-question fa-fw"></i>  What is this App Used For?</span>
      <a href="https://www.entrepreneur.com/article/233054" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-newspaper-o fa-fw"></i>  The Eisenhower Matrix</a>
      <a href="https://www.google.com/search?q=eisenhower+matrix&tbm=vid" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-video-camera fa-fw"></i>  YouTube Explanations</a>
      <a href="https://en.wikipedia.org/wiki/Time_management" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-lightbulb-o fa-fw"></i>  Alternative Methods</a>

      <span class="w3-bar-item w3-button w3-padding w3-black w3-hover-black"><i class="fa fa-check-square fa-fw"></i>  Manage Google Tasks</span>
      <a href="https://mail.google.com/tasks/canvas" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-edit fa-fw"></i>  Create &amp; Edit Google Tasks</a>
      <a href="https://www.youtube.com/watch?v=c5MOyMZBI20" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-key fa-fw"></i>  Login Safety</a>

      <span class="w3-bar-item w3-button w3-padding w3-black w3-hover-black"><i class="fa fa-cloud-download fa-fw"></i>  Downloads</span>
      <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.tasks" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-mobile fa-fw"></i>  Google Tasks on Android</a>
      <a href="https://itunes.apple.com/us/app/google-tasks-get-things-done/id1353634006?mt=8" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-mobile fa-fw"></i>  Google Tasks on iTunes</a>
      <a href="https://github.com/cgherman/task-assist" target="_blank" class="w3-bar-item w3-button w3-padding w3-hover-blue"><i class="fa fa-code fa-fw"></i>  TaskAssist Source Code</a>

    </div>
  </nav>
  
  
  <!-- Overlay effect when opening sidebar on small screens -->
  <div class="w3-overlay w3-hide-large w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>
  
  <!-- !PAGE CONTENT! -->
  <div class="w3-main" style="margin-left:300px;margin-top:43px;">
  
    <!-- Header -->
    <header class="w3-container w3-border-bottom" style="padding-top:14px">
      <div class="w3-bar">
        <div class="w3-left">
          <i class="fa fa-hourglass-2 w3-xlarge"></i>
          &nbsp;
          <label class="w3-large">Eisenhower Matrix</label>
        </div>
        <div class="w3-right">
          <button id="signin-button" onclick="handleSignInClick()">Sign In</button>
          <button id="signout-button" onclick="handleSignOutClick()">Sign Out</button>
        </div>
      </div>
    </header>

    <div class="w3-panel">
      <div class="w3-row-padding" style="margin:0 -16px">
        <div class="w3-container">
          <app-root></app-root>
        </div>
      </div>
    </div>
  
    <!-- Footer -->
    <footer class="w3-container w3-padding-16 w3-light-grey">
    </footer>
  
    <!-- End page content -->
  </div>
  
  <script>
  // Get the Sidebar
  var mySidebar = document.getElementById("mySidebar");
  
  // Get the DIV with overlay effect
  var overlayBg = document.getElementById("myOverlay");
  
  // Toggle between showing and hiding the sidebar, and add overlay effect
  function w3_open() {
      if (mySidebar.style.display === 'block') {
          mySidebar.style.display = 'none';
          overlayBg.style.display = "none";
      } else {
          mySidebar.style.display = 'block';
          overlayBg.style.display = "block";
      }
  }
  
  // Close the sidebar with the close button
  function w3_close() {
      mySidebar.style.display = "none";
      overlayBg.style.display = "none";
  }
  </script>
  
</body>
</html>
